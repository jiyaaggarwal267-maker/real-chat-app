{"ast":null,"code":"import io from 'socket.io-client';\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\nclass SocketService {\n  constructor() {\n    this.socket = null;\n  }\n  connect(userId) {\n    this.socket = io(SOCKET_URL, {\n      transports: ['websocket'],\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000\n    });\n    this.socket.on('connect', () => {\n      console.log('üîå Socket connected');\n      this.socket.emit('user:join', userId);\n    });\n    this.socket.on('disconnect', () => {\n      console.log('‚ùå Socket disconnected');\n    });\n    return this.socket;\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n  sendMessage(data) {\n    if (this.socket) {\n      this.socket.emit('message:send', data);\n    }\n  }\n  onMessageReceive(callback) {\n    if (this.socket) {\n      this.socket.on('message:receive', callback);\n    }\n  }\n  onMessageSent(callback) {\n    if (this.socket) {\n      this.socket.on('message:sent', callback);\n    }\n  }\n  onUserStatus(callback) {\n    if (this.socket) {\n      this.socket.on('user:status', callback);\n    }\n  }\n  startTyping(receiverId) {\n    if (this.socket) {\n      this.socket.emit('typing:start', {\n        receiverId\n      });\n    }\n  }\n  stopTyping(receiverId) {\n    if (this.socket) {\n      this.socket.emit('typing:stop', {\n        receiverId\n      });\n    }\n  }\n  onTypingIndicator(callback) {\n    if (this.socket) {\n      this.socket.on('typing:indicator', callback);\n    }\n  }\n  markAsRead(chatId, senderId) {\n    if (this.socket) {\n      this.socket.emit('message:read', {\n        chatId,\n        senderId\n      });\n    }\n  }\n  onMessagesRead(callback) {\n    if (this.socket) {\n      this.socket.on('messages:read', callback);\n    }\n  }\n}\nexport default new SocketService();","map":{"version":3,"names":["io","SOCKET_URL","process","env","REACT_APP_SOCKET_URL","SocketService","constructor","socket","connect","userId","transports","reconnection","reconnectionAttempts","reconnectionDelay","on","console","log","emit","disconnect","sendMessage","data","onMessageReceive","callback","onMessageSent","onUserStatus","startTyping","receiverId","stopTyping","onTypingIndicator","markAsRead","chatId","senderId","onMessagesRead"],"sources":["C:/Users/JIYA AGRAWAL/OneDrive/Desktop/cosmos-chat/frontend/src/services/socket.js"],"sourcesContent":["import io from 'socket.io-client';\r\n\r\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000';\r\n\r\nclass SocketService {\r\n  constructor() {\r\n    this.socket = null;\r\n  }\r\n\r\n  connect(userId) {\r\n    this.socket = io(SOCKET_URL, {\r\n      transports: ['websocket'],\r\n      reconnection: true,\r\n      reconnectionAttempts: 5,\r\n      reconnectionDelay: 1000\r\n    });\r\n\r\n    this.socket.on('connect', () => {\r\n      console.log('üîå Socket connected');\r\n      this.socket.emit('user:join', userId);\r\n    });\r\n\r\n    this.socket.on('disconnect', () => {\r\n      console.log('‚ùå Socket disconnected');\r\n    });\r\n\r\n    return this.socket;\r\n  }\r\n\r\n  disconnect() {\r\n    if (this.socket) {\r\n      this.socket.disconnect();\r\n      this.socket = null;\r\n    }\r\n  }\r\n\r\n  sendMessage(data) {\r\n    if (this.socket) {\r\n      this.socket.emit('message:send', data);\r\n    }\r\n  }\r\n\r\n  onMessageReceive(callback) {\r\n    if (this.socket) {\r\n      this.socket.on('message:receive', callback);\r\n    }\r\n  }\r\n\r\n  onMessageSent(callback) {\r\n    if (this.socket) {\r\n      this.socket.on('message:sent', callback);\r\n    }\r\n  }\r\n\r\n  onUserStatus(callback) {\r\n    if (this.socket) {\r\n      this.socket.on('user:status', callback);\r\n    }\r\n  }\r\n\r\n  startTyping(receiverId) {\r\n    if (this.socket) {\r\n      this.socket.emit('typing:start', { receiverId });\r\n    }\r\n  }\r\n\r\n  stopTyping(receiverId) {\r\n    if (this.socket) {\r\n      this.socket.emit('typing:stop', { receiverId });\r\n    }\r\n  }\r\n\r\n  onTypingIndicator(callback) {\r\n    if (this.socket) {\r\n      this.socket.on('typing:indicator', callback);\r\n    }\r\n  }\r\n\r\n  markAsRead(chatId, senderId) {\r\n    if (this.socket) {\r\n      this.socket.emit('message:read', { chatId, senderId });\r\n    }\r\n  }\r\n\r\n  onMessagesRead(callback) {\r\n    if (this.socket) {\r\n      this.socket.on('messages:read', callback);\r\n    }\r\n  }\r\n}\r\n\r\nexport default new SocketService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}